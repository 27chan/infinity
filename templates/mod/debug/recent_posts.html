<table class="modlog">
	<tr>
		<th>Time</th>
		<th>Board</th>
		<th>ID</th>
		<th>Thread</th>
		<th>IP</th>
		<th>Name</th>
		<th>Subject</th>
		<th>File</th>
		<th>Body (snippet)</th>
	</tr>
	{% for post in posts %}
		<tr>
			<td class="minimal">
				{{ post.time | ago }} ago
			</td>
			<td class="minimal">
				<a href="?/{{ config.board_path|sprintf(post.board) }}{{ config.file_index }}">{{ config.board_abbreviation|sprintf(post.board) }}</a>
			</td>
			<td class="minimal" >
				{% if post.thread %}
					{% set thread = post.thread %}
				{% else %}
					{% set thread = post.id %}
				{% endif %}
				<a href="{{ config.root ~ post.board ~ '/' ~ config.dir.res}}{{ config.file_page|sprintf(thread) }}#{{ post.id }}">
					{{ post.id }}
				</a>
			</td>
			<td class="minimal">
				{% if post.thread %}
					{{ post.thread }}
				{% else %}
					<small>(OP)</small>
				{% endif %}
			</td>
			<td class="minimal">
				<a href="?/IP/{{ post.ip }}">
					{{ post.ip }}
				</a>
			</td>
			<td class="minimal" >				
				{% if post.email|length > 0 %}
					{# start email #}
					<a class="email" href="mailto:{{ post.email }}">
				{% endif %}
				{% set capcode = post.capcode|capcode %}
				<span {% if capcode.name %}style="{{ capcode.name }}" {% endif %}class="name">{{ post.name }}</span>
				{% if post.trip|length > 0 %}
					<span {% if capcode.trip %}style="{{ capcode.trip }}" {% endif %}class="trip">{{ post.trip }}</span>
				{% endif %}
				{% if post.email|length > 0 %}
					{# end email #}
					</a>
				{% endif %}
				{% if capcode %}
					{{ capcode.cap }}
				{% endif %}
			</td>
			<td class="minimal" >
				{% if post.subject %}
					{{ post.subject }}
				{% else %}
					&ndash;
				{% endif %}
			</td>
			<td class="minimal">
				{% if post.file %}
					{{ post.file }} <small>({{ post.filesize | filesize }})</small>
				{% else %}
					&ndash;
				{% endif %}
			</td>
			<td>
				<em>{{ post.snippet }}</em>
			</td>
		</tr>
	{% endfor %}
</table>

